<div class="page-container">
  <div class="form-card">
    
    <div class="card-header">
      @if(idCategory){
     <h2>Editar categoria</h2>
    } @else {
     <h2>Nueva categoria</h2>
 }
      <p class="subtitle">Completa la información para tu menú</p>
    </div>
    

    <form (ngSubmit)="handleFormSubmission(newCategoryForm)" #newCategoryForm="ngForm">
      
      <div class="form-group">
        <label for="name" class="form-label">Nombre de la Categoría</label>
        
        <input 
          id="name" 
          name="name" 
          type="text" 
          ngModel 
          required 
          minlength="2" 
          maxlength="30" 
          placeholder="Ej: Bebidas, Entradas..."
          #name="ngModel" 
          class="form-input"
          [class.input-error]="name.invalid && name.dirty">
        
        @if (name.dirty && name.invalid) {
          <span class="error-message">El nombre debe tener al menos 2 caracteres.</span>
        }
      </div>

      @if (errorEnBack) {
        <div class="error-banner">
          <p>Ocurrió un error al guardar. Intenta nuevamente.</p>
        </div>
      }

      <div class="form-actions">
       <button 
          [disabled]="newCategoryForm.invalid || isSubmitting" 
          class="btn btn-primary">

          @if(isSubmitting){
        
            <span>Guardando...</span>
          } @else if(idCategory){
            
            <span>Actualizar</span>
          } @else {
            
            <span>Crear Categoría</span>
          }
        </button>
        
        <a routerLink="/admin/myrestaurant" class="btn btn-secondary">
          Cancelar
        </a>
      </div>

    </form>
    
  </div>
</div>